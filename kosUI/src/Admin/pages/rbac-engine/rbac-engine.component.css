/* ══════════════════════════════════════════════════
   RBAC ENGINE
   Vikram's SaaS Control Panel — Design System v1
══════════════════════════════════════════════════ */

.rbac-wrapper {
  min-height: 100vh; background: #F1F5F9;
  font-family: 'Segoe UI', system-ui, sans-serif;
  font-size: 14px; color: #1E293B;
}

/* ══ HEADER ══ */
.dash-header {
  background: #fff; border-bottom: 1px solid #E2E8F0;
  position: sticky; top: 0; z-index: 100;
  box-shadow: 0 1px 4px rgba(0,0,0,.06);
}
.header-inner {
  max-width: 1440px; margin: 0 auto; padding: 0 24px;
  height: 64px; display: flex; align-items: center; gap: 32px;
}
.logo-group    { display: flex; align-items: center; gap: 12px; }
.logo-icon     { width: 36px; height: 36px; flex-shrink: 0; }
.logo-title    { font-size: 16px; font-weight: 700; color: #0F172A; margin: 0; }
.logo-subtitle { font-size: 11px; color: #64748B; margin: 0; }
.main-nav      { display: flex; align-items: center; gap: 4px; flex: 1; }
.nav-link {
  padding: 6px 14px; border-radius: 6px; font-size: 13px;
  font-weight: 500; color: #475569; text-decoration: none; transition: all .15s;
}
.nav-link:hover { background: #F1F5F9; color: #1E293B; }
.nav-active     { background: #EFF6FF; color: #2563EB; font-weight: 600; }
.user-area      { display: flex; align-items: center; gap: 12px; margin-left: auto; }
.live-badge {
  display: flex; align-items: center; gap: 6px; font-size: 12px;
  font-weight: 500; color: #16A34A; background: #F0FDF4;
  padding: 4px 10px; border-radius: 20px; border: 1px solid #BBF7D0;
}
.profile-group { display: flex; align-items: center; gap: 8px; }
.avatar {
  width: 34px; height: 34px; border-radius: 50%; background: #2563EB;
  color: #fff; font-size: 12px; font-weight: 700;
  display: flex; align-items: center; justify-content: center;
}
.profile-name { font-size: 13px; font-weight: 600; margin: 0; color: #1E293B; }
.profile-role { font-size: 11px; color: #64748B; margin: 0; }
.pulse-dot    { width: 7px; height: 7px; border-radius: 50%; display: inline-block; }
.dot-success  { background: #16A34A; animation: pg 2s infinite; }
@keyframes pg {
  0%,100% { box-shadow: 0 0 0 0 rgba(22,163,74,.4); }
  50%      { box-shadow: 0 0 0 4px rgba(22,163,74,0); }
}

/* ══ MAIN ══ */
.dash-main {
  max-width: 1440px; margin: 0 auto;
  padding: 28px 24px 60px;
  display: flex; flex-direction: column; gap: 24px;
}
.welcome-row {
  display: flex; align-items: center;
  justify-content: space-between; flex-wrap: wrap; gap: 12px;
}
.welcome-title { font-size: 22px; font-weight: 700; color: #0F172A; margin: 0; }
.welcome-sub   { font-size: 13px; color: #64748B; margin: 4px 0 0; }

/* ══ STATS ══ */
.stats-grid { display: grid; grid-template-columns: repeat(4,1fr); gap: 16px; }
.stat-card {
  background: #fff; border-radius: 12px; padding: 18px 16px;
  box-shadow: 0 1px 3px rgba(0,0,0,.07); border: 1px solid #F1F5F9;
  display: flex; align-items: flex-start; justify-content: space-between; gap: 12px;
}
.sc-left  { flex: 1; }
.sc-label { font-size: 11px; font-weight: 600; color: #64748B; text-transform: uppercase; letter-spacing: .5px; margin: 0 0 4px; }
.sc-value { font-size: 22px; font-weight: 700; color: #0F172A; margin: 0; }
.sc-sub   { font-size: 11px; color: #94A3B8; margin: 4px 0 0; }
.sc-icon  { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }

/* ══ TABS ══ */
.tab-nav { display: flex; gap: 4px; padding: 8px; flex-wrap: wrap; }
.tab-btn {
  padding: 8px 18px; border-radius: 8px; border: none; background: none;
  font-size: 13px; font-weight: 500; color: #475569;
  cursor: pointer; transition: all .15s; white-space: nowrap;
  display: flex; align-items: center; gap: 6px;
}
.tab-btn:hover { background: #F1F5F9; }
.tab-active    { background: #2563EB; color: #fff; font-weight: 600; }
.tab-content   { display: flex; flex-direction: column; gap: 16px; }
.tab-badge     { font-size: 10px; font-weight: 700; padding: 1px 5px; border-radius: 8px; }
.badge-red     { background: #DC2626; color: #fff; }

/* ══ CARDS ══ */
.card-elevated {
  background: #fff; border-radius: 12px; padding: 20px;
  box-shadow: 0 1px 3px rgba(0,0,0,.07); border: 1px solid #F1F5F9;
}
.table-card    { padding: 0; overflow: hidden; }
.table-top-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 20px; border-bottom: 1px solid #F1F5F9; flex-wrap: wrap; gap: 8px;
}
.section-title { font-size: 14px; font-weight: 700; color: #0F172A; margin: 0; }
.table-sub     { font-size: 11px; color: #94A3B8; margin: 0; }
.mb-16 { margin-bottom: 16px; }

/* ══ ROLES TAB ══ */
.roles-layout { display: grid; grid-template-columns: 1fr 380px; gap: 20px; align-items: start; }
.roles-list   { display: flex; flex-direction: column; gap: 12px; }

.role-card {
  background: #fff; border-radius: 14px; padding: 18px;
  border: 2px solid #F1F5F9; box-shadow: 0 1px 4px rgba(0,0,0,.06);
  cursor: pointer; transition: all .15s;
  display: flex; flex-direction: column; gap: 12px;
}
.role-card:hover   { border-color: #BFDBFE; box-shadow: 0 3px 12px rgba(0,0,0,.1); }
.role-selected     { border-color: #2563EB; background: #FAFBFF; }
.rc-header { display: flex; align-items: flex-start; gap: 12px; }
.rc-dot    { width: 14px; height: 14px; border-radius: 50%; flex-shrink: 0; margin-top: 3px; }
.rc-info   { flex: 1; }
.rc-name   { font-size: 14px; font-weight: 700; color: #1E293B; margin: 0 0 3px; }
.rc-desc   { font-size: 12px; color: #64748B; margin: 0; line-height: 1.4; }
.system-badge {
  font-size: 10px; font-weight: 700; background: #F5F3FF;
  color: #5B21B6; padding: 3px 8px; border-radius: 4px; white-space: nowrap; flex-shrink: 0;
}
.system-badge-sm {
  font-size: 9px; font-weight: 700; background: #F5F3FF;
  color: #5B21B6; padding: 2px 6px; border-radius: 4px; white-space: nowrap;
}
.rc-stats { display: flex; gap: 20px; }
.rc-stat  { display: flex; flex-direction: column; gap: 1px; }
.rcs-val  { font-size: 16px; font-weight: 700; color: #1E293B; }
.rcs-label{ font-size: 10px; color: #94A3B8; }
.rc-perm-bar-bg   { height: 6px; background: #E2E8F0; border-radius: 3px; overflow: hidden; }
.rc-perm-bar-fill { height: 100%; border-radius: 3px; transition: width .4s; }
.rc-actions { display: flex; gap: 8px; }

/* Role Detail Panel */
.role-detail-panel { display: flex; flex-direction: column; gap: 16px; }
.rdp-header { display: flex; align-items: flex-start; gap: 12px; padding-bottom: 14px; border-bottom: 1px solid #F1F5F9; }
.rdp-dot    { width: 16px; height: 16px; border-radius: 50%; flex-shrink: 0; margin-top: 4px; }
.rdp-name   { font-size: 16px; font-weight: 700; color: #1E293B; margin: 0 0 4px; }
.rdp-desc   { font-size: 12px; color: #64748B; margin: 0; }
.rdp-meta   { display: flex; flex-direction: column; gap: 4px; font-size: 12px; color: #64748B; }
.rdp-cat-section { }
.rdp-cat-label {
  font-size: 10px; font-weight: 700; color: #94A3B8;
  text-transform: uppercase; letter-spacing: .5px; margin: 0 0 6px;
}
.rdp-perm-chips { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 6px; }
.rdp-perm-chip {
  font-size: 11px; font-weight: 600; background: #F0FDF4;
  color: #15803D; padding: 3px 8px; border-radius: 4px;
}

/* ══ PERMISSION MATRIX ══ */
.table-scroll  { overflow-x: auto; }
.matrix-table  { width: 100%; border-collapse: collapse; font-size: 12px; }
.matrix-table thead { background: #F8FAFC; }
.matrix-table th {
  padding: 10px 12px; text-align: left; font-size: 11px; font-weight: 700;
  color: #64748B; text-transform: uppercase; letter-spacing: .4px;
  border-bottom: 1px solid #E2E8F0; white-space: nowrap;
}
.matrix-table td { padding: 8px 12px; border-bottom: 1px solid #F8FAFC; vertical-align: middle; }
.th-perm-name { min-width: 180px; }
.th-cat       { min-width: 100px; }
.th-role      { text-align: center; min-width: 110px; }
.th-role-inner { display: flex; flex-direction: column; align-items: center; gap: 4px; }
.th-role-dot   { width: 10px; height: 10px; border-radius: 50%; }
.th-role-name  { font-size: 10px; font-weight: 700; color: #475569; text-align: center; white-space: normal; word-break: break-word; }
.cat-header-row { }
.cat-header-cell {
  padding: 8px 12px; background: #F1F5F9;
  font-size: 11px; font-weight: 700; color: #64748B;
  text-transform: uppercase; letter-spacing: .5px;
}
.perm-row:hover { background: #FAFBFF; }
.td-perm-name strong { font-size: 12px; color: #1E293B; }
.perm-key     { font-size: 10px; color: #94A3B8; font-family: monospace; margin: 1px 0 0; }
.cat-chip     { font-size: 10px; font-weight: 600; background: #F1F5F9; color: #64748B; padding: 2px 7px; border-radius: 4px; }
.td-matrix-cell { text-align: center; }
.matrix-cell {
  display: inline-flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; border-radius: 6px; font-size: 13px; font-weight: 700;
}
.mc-yes { background: #DCFCE7; color: #15803D; }
.mc-no  { background: #F1F5F9; color: #CBD5E1; }

/* ══ GRANULAR ACCESS ══ */
.access-layout      { display: grid; grid-template-columns: 260px 1fr; gap: 20px; align-items: start; }
.access-role-list   { }
.access-role-items  { display: flex; flex-direction: column; gap: 6px; }
.access-role-item {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 12px; border-radius: 10px;
  border: 2px solid #F1F5F9; background: #F8FAFC;
  cursor: pointer; transition: all .15s;
}
.access-role-item:hover { border-color: #BFDBFE; background: #EFF6FF; }
.ari-selected { border-color: #2563EB; background: #EFF6FF; }
.ari-dot  { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.ari-info { flex: 1; }
.ari-name { font-size: 13px; font-weight: 600; color: #1E293B; margin: 0; }
.ari-count{ font-size: 11px; color: #94A3B8; margin: 1px 0 0; }

.access-perm-panel { display: flex; flex-direction: column; gap: 16px; }
.app-header { }
.app-title-row { display: flex; align-items: center; gap: 10px; margin-bottom: 4px; }
.app-dot  { width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; }
.app-sub  { font-size: 12px; color: #64748B; margin: 0; }

.cat-filter-row { display: flex; gap: 6px; flex-wrap: wrap; }
.cat-filter-btn {
  padding: 5px 12px; border-radius: 20px; border: 1px solid #E2E8F0;
  background: #F8FAFC; font-size: 12px; font-weight: 500;
  color: #475569; cursor: pointer; transition: all .15s;
}
.cat-filter-btn:hover    { border-color: #BFDBFE; color: #2563EB; }
.cat-filter-active       { background: #2563EB; color: #fff; border-color: #2563EB; }
.cat-filter-btn-sm       { padding: 4px 10px; font-size: 11px; }

.system-warn {
  display: flex; align-items: center; gap: 8px;
  padding: 10px 12px; background: #FFFBEB; border-radius: 8px;
  border: 1px solid #FDE68A; font-size: 12px; color: #92400E;
}
.perm-access-grid { display: flex; flex-direction: column; gap: 6px; }
.perm-access-row {
  display: flex; align-items: center; gap: 14px;
  padding: 12px 16px; border-radius: 10px;
  border: 1px solid #F1F5F9; background: #F8FAFC; transition: all .15s;
}
.par-granted { background: #F0FDF4; border-color: #BBF7D0; }
.par-denied  { background: #F8FAFC; }
.par-info  { flex: 1; }
.par-label { font-size: 13px; font-weight: 600; color: #1E293B; margin: 0 0 2px; }
.par-key   { font-size: 10px; color: #94A3B8; font-family: monospace; margin: 0 0 2px; }
.par-desc  { font-size: 11px; color: #64748B; margin: 0; }
.par-right { display: flex; align-items: center; gap: 12px; flex-shrink: 0; }
.par-cat-chip { font-size: 10px; font-weight: 600; background: #F1F5F9; color: #64748B; padding: 2px 7px; border-radius: 4px; }
.toggle-disabled { opacity: .4; pointer-events: none; cursor: not-allowed; }

/* ══ AUDIT LOG ══ */
.audit-filter-row {
  display: flex; align-items: center; gap: 8px;
  padding: 12px 16px; flex-wrap: wrap;
}
.filter-chip {
  padding: 5px 12px; border-radius: 20px; border: 1px solid #E2E8F0;
  background: #F8FAFC; font-size: 12px; font-weight: 500;
  color: #475569; cursor: pointer; transition: all .15s;
  display: flex; align-items: center; gap: 5px;
}
.filter-chip:hover      { border-color: #BFDBFE; color: #2563EB; }
.filter-chip-active     { background: #2563EB; color: #fff; border-color: #2563EB; }
.filter-crit            { background: #DC2626 !important; border-color: #DC2626 !important; }
.filter-warn            { background: #D97706 !important; border-color: #D97706 !important; }
.chip-count-red {
  font-size: 10px; font-weight: 800; background: #DC2626;
  color: #fff; padding: 1px 5px; border-radius: 8px;
}
.audit-total { font-size: 12px; color: #94A3B8; margin-left: auto; }

.audit-list  { display: flex; flex-direction: column; gap: 0; }
.audit-row {
  display: flex; align-items: flex-start; gap: 14px;
  padding: 16px 20px; border-bottom: 1px solid #F8FAFC; transition: background .15s;
}
.audit-row:hover    { background: #FAFBFF; }
.audit-critical     { background: #FFF8F8; }
.audit-warning      { background: #FFFCF5; }
.audit-sev-bar { width: 4px; border-radius: 2px; align-self: stretch; flex-shrink: 0; min-height: 60px; }
.asb-info { background: #2563EB; }
.asb-warn { background: #D97706; }
.asb-crit { background: #DC2626; }

.audit-actor { display: flex; align-items: center; gap: 8px; min-width: 160px; flex-shrink: 0; }
.aa-avatar   {
  width: 34px; height: 34px; border-radius: 50%; font-size: 14px; font-weight: 700;
  color: #2563EB; display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.aa-name  { font-size: 13px; font-weight: 600; color: #1E293B; margin: 0; }
.aa-role  { font-size: 11px; color: #94A3B8; margin: 1px 0 0; }

.audit-action { display: flex; flex-direction: column; gap: 5px; min-width: 200px; flex-shrink: 0; }
.audit-action-code {
  font-size: 11px; font-weight: 700; font-family: monospace;
  background: #F1F5F9; color: #475569; padding: 2px 7px; border-radius: 4px;
  width: fit-content;
}
.audit-target-chip { font-size: 11px; font-weight: 600; padding: 2px 7px; border-radius: 4px; width: fit-content; }
.at-role   { background: #F5F3FF; color: #5B21B6; }
.at-perm   { background: #EFF6FF; color: #1D4ED8; }
.at-user   { background: #ECFDF5; color: #065F46; }
.at-system { background: #F1F5F9; color: #475569; }

.audit-detail { flex: 1; }
.ad-text  { font-size: 12px; color: #1E293B; margin: 0 0 6px; line-height: 1.4; }
.ad-meta  { display: flex; gap: 16px; flex-wrap: wrap; font-size: 11px; color: #94A3B8; }
.audit-right { display: flex; flex-direction: column; align-items: flex-end; gap: 4px; flex-shrink: 0; }
.audit-sev-pill { display: inline-block; padding: 3px 8px; border-radius: 4px; font-size: 10px; font-weight: 700; }
.as-info     { background: #EFF6FF; color: #1D4ED8; }
.as-warning  { background: #FEF3C7; color: #B45309; }
.as-critical { background: #FEE2E2; color: #991B1B; }

/* ══ TOGGLE ══ */
.toggle-wrap  { display: flex; align-items: center; gap: 8px; cursor: pointer; }
.toggle-track {
  width: 44px; height: 24px; border-radius: 12px; background: #E2E8F0;
  position: relative; transition: background .2s; flex-shrink: 0;
}
.toggle-on    { background: #2563EB; }
.toggle-thumb {
  position: absolute; top: 3px; left: 3px; width: 18px; height: 18px;
  border-radius: 50%; background: #fff;
  transition: transform .2s; box-shadow: 0 1px 3px rgba(0,0,0,.2);
}
.toggle-on .toggle-thumb { transform: translateX(20px); }
.toggle-lbl   { font-size: 11px; font-weight: 700; color: #64748B; }

/* ══ BUTTONS ══ */
.btn-primary, .btn-ghost {
  padding: 9px 20px; border-radius: 8px; font-size: 13px;
  font-weight: 600; cursor: pointer; transition: all .15s; border: none;
}
.btn-primary      { background: #2563EB; color: #fff; }
.btn-primary:hover { background: #1D4ED8; }
.btn-primary[disabled] { opacity: .45; cursor: not-allowed; }
.btn-ghost        { background: #F1F5F9; color: #475569; border: 1px solid #E2E8F0; }
.btn-ghost:hover  { background: #E2E8F0; }
.icon-text-btn {
  flex: 1; padding: 6px 10px; border-radius: 6px; border: 1px solid #E2E8F0;
  background: #F8FAFC; font-size: 11px; font-weight: 600;
  color: #475569; cursor: pointer; text-align: center; transition: all .15s;
}
.icon-text-btn:hover        { background: #EFF6FF; color: #2563EB; border-color: #BFDBFE; }
.icon-text-btn-del:hover    { background: #FFF1F2; color: #DC2626; border-color: #FECDD3; }
.icon-text-btn[disabled]    { opacity: .35; cursor: not-allowed; pointer-events: none; }

/* ══ MODAL ══ */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.4); z-index: 300; }
.modal-box {
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%,-50%); width: 100%; max-width: 640px;
  background: #fff; border-radius: 16px; z-index: 301;
  box-shadow: 0 20px 60px rgba(0,0,0,.18);
  animation: mIn .2s ease-out; overflow: hidden;
}
@keyframes mIn {
  from { transform: translate(-50%,-50%) scale(.95); opacity: 0; }
  to   { transform: translate(-50%,-50%) scale(1);   opacity: 1; }
}
.modal-hdr {
  display: flex; align-items: center; justify-content: space-between;
  padding: 18px 20px; border-bottom: 1px solid #F1F5F9;
}
.modal-hdr h3 { font-size: 15px; font-weight: 700; margin: 0; color: #0F172A; }
.modal-body {
  padding: 20px; display: flex; flex-direction: column; gap: 14px;
  max-height: 72vh; overflow-y: auto;
}
.modal-footer {
  padding: 14px 20px; border-top: 1px solid #F1F5F9;
  display: flex; justify-content: flex-end; gap: 10px;
}
.close-btn {
  background: none; border: none; font-size: 16px;
  cursor: pointer; color: #94A3B8; padding: 4px 6px; border-radius: 4px;
}
.close-btn:hover { background: #F1F5F9; color: #475569; }

/* ══ FORM ══ */
.form-group  { display: flex; flex-direction: column; gap: 6px; }
.form-label  { font-size: 12px; font-weight: 600; color: #475569; }
.form-label-count {
  font-size: 11px; font-weight: 700; background: #EFF6FF;
  color: #2563EB; padding: 1px 7px; border-radius: 4px; margin-left: 6px;
}
.form-input, .form-select {
  padding: 9px 12px; border: 1px solid #E2E8F0; border-radius: 8px;
  font-size: 13px; color: #1E293B; background: #F8FAFC; outline: none;
  transition: border-color .15s; width: 100%; box-sizing: border-box;
}
.form-input:focus, .form-select:focus { border-color: #2563EB; background: #fff; }
.form-textarea {
  padding: 9px 12px; border: 1px solid #E2E8F0; border-radius: 8px;
  font-size: 13px; color: #1E293B; background: #F8FAFC; outline: none;
  resize: vertical; font-family: inherit; width: 100%; box-sizing: border-box;
}
.form-textarea:focus { border-color: #2563EB; }
.form-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.color-input-row { display: flex; align-items: center; gap: 8px; }
.color-swatch    { width: 36px; height: 36px; border-radius: 8px; border: 1px solid #E2E8F0; cursor: pointer; padding: 2px; background: none; flex-shrink: 0; }
.color-hex       { flex: 1; font-family: monospace; font-size: 12px; }

.modal-cat-filter { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 8px; }
.modal-perm-grid  { display: flex; flex-direction: column; gap: 4px; max-height: 320px; overflow-y: auto; }
.modal-perm-row {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 12px; border-radius: 8px; border: 1px solid #E2E8F0;
  background: #F8FAFC; cursor: pointer; transition: all .15s;
}
.modal-perm-row:hover { border-color: #BFDBFE; background: #EFF6FF; }
.mpr-selected { background: #EFF6FF; border-color: #BFDBFE; }
.mpr-check {
  width: 20px; height: 20px; border-radius: 6px; border: 2px solid #E2E8F0;
  background: #fff; display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.mpr-checked { background: #2563EB; border-color: #2563EB; }
.mpr-checked svg { stroke: #fff; }
.mpr-info  { flex: 1; }
.mpr-label { font-size: 12px; font-weight: 600; color: #1E293B; margin: 0 0 2px; }
.mpr-desc  { font-size: 11px; color: #94A3B8; margin: 0; }

/* ══ ICONS ══ */
.icon-xs { width: 14px; height: 14px; }
.icon-md { width: 18px; height: 18px; }

/* ══ RESPONSIVE ══ */
@media (max-width: 1200px) {
  .roles-layout  { grid-template-columns: 1fr; }
  .access-layout { grid-template-columns: 1fr; }
}
@media (max-width: 960px) {
  .stats-grid { grid-template-columns: repeat(2,1fr); }
}
@media (max-width: 768px) {
  .main-nav  { display: none; }
  .dash-main { padding: 16px; gap: 16px; }
  .form-grid-2 { grid-template-columns: 1fr; }
  .audit-row   { flex-wrap: wrap; }
  .audit-actor { min-width: unset; }
  .audit-action{ min-width: unset; }
}
@media (max-width: 480px) {
  .stats-grid { grid-template-columns: 1fr; }
  .tab-btn    { padding: 7px 10px; font-size: 12px; }
}
