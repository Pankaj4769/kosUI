<!-- ✅ Added mouse events to main container -->
<div class="sidebar" 
     [class.collapsed]="layout.isCollapsed()"
     (mouseenter)="onMouseEnter()"
     (mouseleave)="onMouseLeave()">

  <!-- Toggle -->
  <button class="toggle" (click)="layout.toggle()">
    <span class="material-icons">menu</span>
  </button>

  <!-- Logo -->
  <div class="logo">
    <!-- Use CSS to hide/show full logo instead of *ngIf for smoother effect if needed, 
         but *ngIf is okay here since it changes content, not just width -->
    <span *ngIf="layout.isCollapsed() && !isHovered">K</span>
    <span *ngIf="!layout.isCollapsed() || isHovered">KOS</span>
  </div>

  <nav>
    <ng-container *ngFor="let item of menuItems; trackBy: trackByLabel">

      <!-- SINGLE MENU ITEM -->
      <a *ngIf="!item.children"
         [routerLink]="item.route"
         routerLinkActive="active"
         class="menu-item"
         [title]="getTooltip(item.label)">
        
        <span class="material-icons icon">{{ item.icon }}</span>
        <!-- ✅ Removed *ngIf, controlled by CSS opacity -->
        <span class="text">{{ item.label }}</span>
      </a>

      <!-- GROUP MENU -->
      <div *ngIf="item.children"
           class="menu-group"
           [class.expanded]="item.expanded">

        <div class="menu-item group-header"
             (click)="toggleGroup(item)"
             [class.active-group]="item.expanded"
             [title]="getTooltip(item.label)">
          
          <span class="material-icons icon">{{ item.icon }}</span>
          <!-- ✅ Removed *ngIf -->
          <span class="text">{{ item.label }}</span>
          <!-- ✅ Removed *ngIf -->
          <span class="material-icons arrow">
            {{ item.expanded ? 'expand_less' : 'expand_more' }}
          </span>
        </div>

        <!-- SUBMENU -->
        <div class="submenu">
          <a *ngFor="let child of item.children"
             [routerLink]="child.route"
             routerLinkActive="active"
             class="submenu-item">
            
            <span class="material-icons icon">{{ child.icon }}</span>
            <span class="text">{{ child.label }}</span>
          </a>
        </div>
      </div>

    </ng-container>
  </nav>
</div>
