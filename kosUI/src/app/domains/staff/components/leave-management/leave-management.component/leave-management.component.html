<!-- Leave KPI Cards -->
<div class="kpi-row-modern" *ngIf="kpi">
  <div class="kpi-card-modern" style="border-color: #fbbf24;">
    <div class="kpi-icon-modern" style="background: #fef3c7;">â³</div>
    <div class="kpi-content-modern">
      <span class="kpi-label-modern">Pending</span>
      <strong class="kpi-value-modern">{{ kpi.pending }}</strong>
    </div>
  </div>

  <div class="kpi-card-modern on-duty">
    <div class="kpi-icon-modern">âœ…</div>
    <div class="kpi-content-modern">
      <span class="kpi-label-modern">Approved</span>
      <strong class="kpi-value-modern">{{ kpi.approved }}</strong>
    </div>
  </div>

  <div class="kpi-card-modern" style="border-color: #ef4444;">
    <div class="kpi-icon-modern" style="background: #fee;">âŒ</div>
    <div class="kpi-content-modern">
      <span class="kpi-label-modern">Rejected</span>
      <strong class="kpi-value-modern">{{ kpi.rejected }}</strong>
    </div>
  </div>

  <div class="kpi-card-modern efficiency">
    <div class="kpi-icon-modern">ğŸ“…</div>
    <div class="kpi-content-modern">
      <span class="kpi-label-modern">Total Days</span>
      <strong class="kpi-value-modern">{{ kpi.totalDays }}</strong>
    </div>
  </div>
</div>

<!-- Leave Filters -->
<div class="leave-filters-bar">
  <div class="filter-group">
    <button
      class="filter-btn"
      [class.active]="filter === 'ALL'"
      (click)="onFilterChange('ALL')">
      All
    </button>
    <button
      class="filter-btn"
      [class.active]="filter === 'PENDING'"
      (click)="onFilterChange('PENDING')">
      Pending
    </button>
    <button
      class="filter-btn"
      [class.active]="filter === 'APPROVED'"
      (click)="onFilterChange('APPROVED')">
      Approved
    </button>
    <button
      class="filter-btn"
      [class.active]="filter === 'REJECTED'"
      (click)="onFilterChange('REJECTED')">
      Rejected
    </button>
  </div>

  <button class="add-staff-btn" (click)="onRequestLeave()">
    â• Request Leave
  </button>
</div>

<!-- Leave Requests Cards -->
<div class="leave-requests-grid">
  <div class="leave-card" *ngFor="let leave of filteredRequests">
    <div class="leave-card-header">
      <div class="leave-staff-info">
        <div class="staff-avatar-small">
          {{ leave.staffName.charAt(0) }}
        </div>
        <div>
          <strong>{{ leave.staffName }}</strong>
          <span class="leave-type-badge">
            {{ getLeaveTypeLabel(leave.leaveType) }}
          </span>
        </div>
      </div>
      <span
        class="leave-status-badge"
        [class.pending]="leave.status === 'PENDING'"
        [class.approved]="leave.status === 'APPROVED'"
        [class.rejected]="leave.status === 'REJECTED'">
        {{ leave.status }}
      </span>
    </div>

    <div class="leave-card-body">
      <div class="leave-dates">
        <span class="leave-icon">ğŸ“…</span>
        <strong>
          {{ leave.startDate | date:'MMM dd' }} -
          {{ leave.endDate   | date:'MMM dd, yyyy' }}
        </strong>
        <span class="leave-days">
          ({{ leave.days }} days)
        </span>
      </div>

      <div class="leave-reason">
        <span class="leave-label">Reason:</span>
        <p>{{ leave.reason }}</p>
      </div>

      <div class="leave-meta">
        <span>Applied: {{ leave.appliedDate | date:'MMM dd, yyyy' }}</span>
        <span *ngIf="leave.approvedBy && leave.approvedDate">
          Approved by {{ leave.approvedBy }}
          on {{ leave.approvedDate | date:'MMM dd, yyyy' }}
        </span>
      </div>
    </div>

    <div class="leave-card-footer" *ngIf="leave.status === 'PENDING'">
      <button class="btn-approve" (click)="onApprove(leave.id)">
        âœ“ Approve
      </button>
      <button class="btn-reject" (click)="onReject(leave.id)">
        âœ— Reject
      </button>
    </div>
  </div>

  <div class="empty-state" *ngIf="filteredRequests.length === 0">
    <span class="empty-icon">ğŸ“…</span>
    <p>No leave requests found</p>
  </div>
</div>
