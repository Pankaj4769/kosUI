<!-- Attendance KPI Cards -->
<div class="kpi-row-modern" *ngIf="kpi">
  <div class="kpi-card-modern on-duty">
    <div class="kpi-icon-modern">‚úÖ</div>
    <div class="kpi-content-modern">
      <span class="kpi-label-modern">Present</span>
      <strong class="kpi-value-modern">{{ kpi.present }}</strong>
    </div>
  </div>

  <div class="kpi-card-modern" style="border-color: #ef4444;">
    <div class="kpi-icon-modern" style="background: #fee;">‚ùå</div>
    <div class="kpi-content-modern">
      <span class="kpi-label-modern">Absent</span>
      <strong class="kpi-value-modern">{{ kpi.absent }}</strong>
    </div>
  </div>

  <div class="kpi-card-modern" style="border-color: #fbbf24;">
    <div class="kpi-icon-modern" style="background: #fef3c7;">‚ö†Ô∏è</div>
    <div class="kpi-content-modern">
      <span class="kpi-label-modern">Late</span>
      <strong class="kpi-value-modern">{{ kpi.late }}</strong>
    </div>
  </div>

  <div class="kpi-card-modern efficiency">
    <div class="kpi-icon-modern">üìÖ</div>
    <div class="kpi-content-modern">
      <span class="kpi-label-modern">On Leave</span>
      <strong class="kpi-value-modern">{{ kpi.onLeave }}</strong>
    </div>
  </div>
</div>

<!-- Date Selector -->
<div class="date-selector-bar">
  <h3>Attendance for {{ selectedDate | date:'fullDate' }}</h3>
  <input
    type="date"
    class="form-input date-input"
    [ngModel]="selectedDate | date:'yyyy-MM-dd'"
    (ngModelChange)="onDateChange($event)"
  />
</div>

<!-- Attendance Table -->
<div class="attendance-table-container">
  <table class="staff-table">
    <thead>
      <tr>
        <th>STAFF MEMBER</th>
        <th>CLOCK IN</th>
        <th>CLOCK OUT</th>
        <th>TOTAL HOURS</th>
        <th>STATUS</th>
        <th>ACTIONS</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let record of records">
        <td class="staff-member-cell">
          <div class="staff-avatar">{{ record.staffName.charAt(0) }}</div>
          <div class="staff-info">
            <strong>{{ record.staffName }}</strong>
            <span class="staff-id">{{ record.staffId }}</span>
          </div>
        </td>

        <td>
          <span class="time-badge">
            {{ record.clockIn || '--:--' }}
          </span>
        </td>

        <td>
          <span class="time-badge">
            {{ record.clockOut || '--:--' }}
          </span>
        </td>

        <td>
          <strong>{{ record.totalHours }}h</strong>
        </td>

        <td>
          <span
            class="attendance-status-badge"
            [style.background]="getAttendanceStatusColor(record.status)"
            [style.color]="'white'">
            {{ record.status }}
          </span>
        </td>

        <td>
          <button
            class="action-btn-icon"
            (click)="onViewDetails(record)"
            title="View Details">
            üëÅÔ∏è
          </button>
          <button
            class="action-btn-icon"
            *ngIf="record.status === 'ABSENT'"
            (click)="onMarkAttendance(record.staffId, 'PRESENT')"
            title="Mark Present">
            ‚úì
          </button>
          <button
            class="action-btn-icon"
            *ngIf="!record.clockOut && record.clockIn"
            (click)="onClockOut(record.staffId)"
            title="Clock Out">
            üïê
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Monthly Calendar View -->
<div class="calendar-section">
  <h3>Monthly Attendance Overview</h3>
  <div class="attendance-calendar">
    <p class="calendar-placeholder">üìÖ Calendar view coming soon...</p>
  </div>
</div>
