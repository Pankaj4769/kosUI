<div class="subscription-wrapper">

  <div class="sub-header">
    <span class="material-icons brand-icon">restaurant</span>
    <h1>KOS</h1>
  </div>

  <!-- ── Step 1: Plan Selection ── -->
  <div *ngIf="step === 'plan'">
    <h2 class="sub-title">Choose Your Plan</h2>
    <p class="sub-subtitle">Select a subscription that fits your restaurant</p>

    <div class="plans-grid">
      <div class="plan-card"
           *ngFor="let plan of plans"
           [class.selected]="selectedPlan === plan.id"
           [class.popular]="plan.popular"
           (click)="selectPlan(plan.id)">

        <div class="popular-badge" *ngIf="plan.popular">Most Popular</div>

        <div class="plan-name">{{ plan.name }}</div>
        <div class="plan-price">
          {{ plan.price }}<span class="plan-period">{{ plan.period }}</span>
        </div>
        <div class="plan-staff">
          <span class="material-icons">people</span>
          {{ plan.staffLimit === 999 ? 'Unlimited' : 'Up to ' + plan.staffLimit }} staff
        </div>

        <ul class="plan-features">
          <li *ngFor="let feature of plan.features">
            <span class="material-icons check">check_circle</span>
            {{ feature }}
          </li>
        </ul>

        <div class="plan-select-indicator">
          <span class="material-icons" *ngIf="selectedPlan === plan.id">radio_button_checked</span>
          <span class="material-icons" *ngIf="selectedPlan !== plan.id">radio_button_unchecked</span>
          {{ selectedPlan === plan.id ? 'Selected' : 'Select Plan' }}
        </div>
      </div>
    </div>

    <div class="sub-actions">
      <button class="btn-proceed" [disabled]="!selectedPlan" (click)="proceedToContact()">
        Proceed with {{ selectedPlan ? getPlanById(selectedPlan)?.name : '...' }}
        <span class="material-icons">arrow_forward</span>
      </button>
    </div>
  </div>

  <!-- ── Step 2: Contact Details ── -->
  <div *ngIf="step === 'contact'" class="contact-step">
    <button class="btn-back" (click)="goBack()">
      <span class="material-icons">arrow_back</span> Back
    </button>

    <h2 class="sub-title">Contact Details</h2>
    <p class="sub-subtitle">
      Our team will review and activate your
      <strong>{{ getPlanById(selectedPlan!)?.name }}</strong> plan
    </p>

    <form class="contact-form" (ngSubmit)="submitContact()" novalidate>
      <div class="form-row">
        <div class="form-group">
          <label>Your Name *</label>
          <input type="text" [(ngModel)]="contact.name" name="name"
                 placeholder="Full name" required />
        </div>
        <div class="form-group">
          <label>Restaurant Name *</label>
          <input type="text" [(ngModel)]="contact.restaurantName"
                 name="restaurantName" placeholder="Restaurant name" required />
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>Email Address *</label>
          <input type="email" [(ngModel)]="contact.email" name="email"
                 placeholder="your&#64;email.com" required />
        </div>
        <div class="form-group">
          <label>Phone Number *</label>
          <input type="tel" [(ngModel)]="contact.phone" name="phone"
                 placeholder="10-digit number" maxlength="10" required />
        </div>
      </div>
      <div class="form-group">
        <label>Message (Optional)</label>
        <textarea [(ngModel)]="contact.message" name="message" rows="3"
                  placeholder="Any specific requirements..."></textarea>
      </div>

      <button type="submit" class="btn-proceed"
              [disabled]="isLoading || !contact.name || !contact.email || !contact.phone">
        <span class="material-icons spin" *ngIf="isLoading">autorenew</span>
        <span>{{ isLoading ? 'Submitting...' : 'Submit for Approval' }}</span>
        <span class="material-icons" *ngIf="!isLoading">send</span>
      </button>
    </form>
  </div>

</div>
